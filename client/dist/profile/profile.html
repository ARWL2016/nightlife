
<section class="profile-page-content">
  <h1>Profile</h1>
  <p>Set your location with the search box below. Sign in to view diary events.</p>

  <!-- PROFILE INFO TABLE -->
  <table class="profile-table">
    <tr>
      <td class="profile-table-icon-cell">
        <i ng-show="vm.displayName" class="fa fa-check-square" aria-hidden="true"></i>
        <i ng-show="!vm.displayName" class="fa fa-times-circle" aria-hidden="true"></i>
      </td>
      <td class="profile-table-heading-cell">
        <b>User</b>
      </td>
      <td>
        {{vm.displayName || 'not logged in'}}
      </td>
    </tr>
    <tr>
      <td class="profile-table-icon-cell">
        <i class="fa fa-map-marker" aria-hidden="true"></i>
      </td>
      <td class="profile-table-heading-cell">
        <b>Location</b>
      </td>
      <td>
          {{vm.locationObj.formatted_address || 'not set'}}
      </td>
    </tr>
  </table>

  <!-- LOCATION SEARCH WIDGET -->
  <form name="locationSearch" class="location-search-form">
    <input 
      type="text"
      name="location"
      class="location-form-input"
      ng-model="vm.query"
      ng-focus="vm.clearError()"
      placeholder="e.g. Bristol, UK"
      autocomplete="off"
      aria-label="location search"
      required>
      <button ng-click="vm.searchLocation()" class="location-form-button"><i class="fa fa-search" aria-hidden="true"></i></button>    
  </form>
  <p>{{ vm.error }}</p>

  <!-- SPINNER -->
  <div ng-show="vm.showSpinner" class="spinner spinner-profile"></div>
  <div ng-show="vm.locationOptions" class="location-search-results-wrapper">
    <p ng-repeat="option in vm.locationOptions" ng-click="vm.selectLocation(option)" class="location-search-result">
      <i class="fa fa-plus-square" aria-hidden="true"></i> {{option.formatted_address}}
    </p>
  </div>

  <!-- CUSTOM COMPONENT  -->
  <events></events>

</section>  
